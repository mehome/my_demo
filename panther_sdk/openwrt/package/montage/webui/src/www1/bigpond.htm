<!--ifdef CONFIG_BPA-->
<!DOCTYPE HTML>
<HTML>

<head>
 <title>Panther</title>
 <META http-equiv=Content-Type content='text/html; charset=utf-8'>
 <SCRIPT src=common.js></SCRIPT>
 <SCRIPT src=wdk.js></SCRIPT>
 <SCRIPT src=product.js></SCRIPT>
 <SCRIPT>
wdk.cdbLoad(['$wan_dhcp_mtu', '$wan_dhcp_reqip', '$wan_bpa_user', '$wan_bpa_pass', '$wan_bpa_serv',
	'$wan_clone_mac_enable', '$wan_clone_mac', '$dns_fix', '$dns_svr1', '$dns_svr2', '$lan_ip',
	'$op_work_mode'
]);

var lanip = wdk.cdbVal('$lan_ip');
var opWorkMode = wdk.cdbVal('$op_work_mode');
var currentHost = window.location.host;

function init() {
	var f = document.frm;
	wdk.init_form();
	if (lanip != currentHost)
		f.Btn.disabled = true;
	else
		f.Btn.disabled = false;
	f.pass.value = f._ps2.value = wdk.cdbVal('$wan_bpa_pass');
}

function apply() {
	var f = document.frm;

	if (!chkIpOrDomain(f.svr, "BigPond Server")) {
		highlight("$wan_bpa_serv");
		return;
	}
	if (!chkIpOrNull(f.ip, "Request IP address")) {
		highlight("$wan_dhcp_reqip");
		return;
	}
	if (f.ip.value == lanip) {
		alert(wdk.msg("WAN IP address can't be the same with LAN IP address !"));
		highlight("$wan_dhcp_reqip");
		return;
	}
	if (!chkNum(f.mtu, 576, 1500, "MTU")) {
		highlight("$wan_dhcp_mtu");
		return;
	}
	if (!chkStr(f.user, "BigPond Account")) {
		highlight("$wan_bpa_user");
		return;
	}
	if (!chkStrLen(f.user, WAN_USERNAME_MIN_LEN, WAN_USERNAME_MAX_LEN, "BigPond Account")) {
		highlight("$wan_bpa_user");
		return;
	}
	if (!chkStrLen(f.pass, WAN_PASSWD_MIN_LEN, WAN_PASSWD_MAX_LEN, "BigPond Password")) {
		highlight("$wan_bpa_pass");
		return;
	}
	//if (f.pass) if (!chkPass(f.pass,f._ps2,f._changed)) { f._ps2.focus(); return ; }
	if (!chkPass(f.pass, f._ps2, f._changed, "New input password is not consistent!")) {
		highlight("retypePsw");
		return;
	}
	//if (f.cloneEn.checked)
	{
		if (!chkMAC(f.mac, "MAC address")) {
			highlight("$wan_clone_mac");
			return;
		} else {
			wdk.cdbSet("$wan_clone_mac", f.mac.value)
			wdk.cdbSet("$wan_clone_mac_enable", (f.cloneEn.checked) ? 1 : 0)
		}
	}
	if (f.DSEN.checked) {
		if (!chkIP(f.DS1, "Primary DNS")) {
			highlight("$dns_svr1");
			return;
		}
	}
	if (!chkIpOrNull(f.DS2, "Secondary DNS")) {
		hightlight("$dns_svr2");
		return;
	}

	if (f.mtu.value != wdk.cdbVal('$wan_dhcp_mtu')) {
		if (window.confirm(wdk.msg("MTU value is changed! Device will reboot!"))) {
			wdk.showResultBG();
			reboot();
			wdk.save_form(0, 1);
		}
	} else if (wdk.cdbChg("$wan_clone_mac") || wdk.cdbChg("$wan_clone_mac_enable")) { // clone mac patch
		wdk.showResultBG();
		reboot();
		wdk.save_form(0, 1);
	} else
		wdk.save_form(2000);
}
 </SCRIPT>

 <link rel=stylesheet type=text/css href=demo2.css>
</HEAD>

<body class=gui onload=init() onkeydown="(event.keyCode==13) ? 0 : 1">
 <script>
header()
 </script>
 <form name=frm>
  <script>
wanModeList(6, opWorkMode);
  </script>
  <br>
  <fieldset>
   <legend>
    <script>
wdk.putmsg("BigPond");
    </script>
   </legend>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("BigPond Account")
     </script>
    </div>
    <input name=user id=$wan_bpa_user size=20 maxlength=60>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("BigPond Password")
     </script>
    </div>
    <input type=password name=pass id=$wan_bpa_pass size=25 onFocus=chkPassInput(this,_ps2,_changed);>
    <input type=hidden name=_changed value=0>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Please retype your password")
     </script>
    </div>
    <input id="retypePsw" type=password name=_ps2 size=25 onFocus=chkPassInput(pass,this,_changed);>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("BigPond Server");
wdk.putmsg(" (IP or Domain name)");
     </script>
    </div>
    <input name=svr id=$wan_bpa_serv size=25 maxlength=60 value>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Request IP address");
     </script>
    </div>
    <input name=ip id=$wan_dhcp_reqip size=17 maxlength=15>
   </div>
   <div class=setting>
    <div class=label>MTU (576-1500)</div>
    <input name=mtu id=$wan_dhcp_mtu size=4 maxlength=4>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Static DNS Server")
     </script>
    </div>
    <input type=checkbox name=DSEN id=$dns_fix value=1>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Primary DNS");
     </script>
    </div>
    <input name=DS1 id=$dns_svr1 size=17 maxlength=15>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Secondary DNS")
     </script>
    </div>
    <input name=DS2 id=$dns_svr2 size=17 maxlength=15>
    <script>
wdk.putmsg("(Optional)")
    </script>
   </div>
   <div class=setting>
    <script>
if (lanip != currentHost) {
	puts('<div class=label><font color="#C0C0C0">' + wdk.msg("MAC Cloning") + '<' + '/font><' + '/div>');
	puts('<input type=checkbox name=cloneEn id=$wan_clone_mac_enable disabled>');
	puts('<font color="#C0C0C0">' + wdk.msg("Enabled") + '<' + '/font>');
} else {
	puts('<div class=label>' + wdk.msg("MAC Cloning") + '<' + '/div>');
	puts('<input type=checkbox name=cloneEn id=$wan_clone_mac_enable>');
	wdk.putmsg("Enabled");
}
    </script>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("MAC Address");
     </script>(XX:XX:XX:XX:XX:XX)</div>
    <input name=mac id=$wan_clone_mac size=17 maxlength=17>
    <script>
if (lanip != currentHost) {
	puts('<input type=button name=Btn class=BtnGrey value="' + wdk.msg("Clone MAC") + '" onclick=cloneMac(cloneEn,mac)>');
} else
	puts('<input type=button name=Btn class=button value="' + wdk.msg("Clone MAC") + '" onclick=cloneMac(cloneEn,mac)>');
    </script>
   </div>
  </fieldset>

  <script>
footer()
  </script>
 </form>

</html>
<!--endif-->
