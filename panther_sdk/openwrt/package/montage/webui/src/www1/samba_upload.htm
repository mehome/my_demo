<!--ifdef CONFIG_PACKAGE_samba36_client-->
<!DOCTYPE HTML>
<HTML>

<head>
 <title>Panther</title>
 <META http-equiv=Content-Type content='text/html; charset=utf-8'>
 <SCRIPT src=common.js></SCRIPT>
 <SCRIPT src=wdk.js></SCRIPT>
 <SCRIPT src=product.js></SCRIPT>
 <SCRIPT>
wdk.cdbLoad(['$smb_file', '$smb_url', '$smb_usr', '$smb_pass']);

var fin = false;

function upload_prompt() {
	var val = Number(wdk.cliCmd("smbc upload_status").trim());
	fin = (val == 1) ? true : false;
	if (fin) {
		var message = "Upload files successfully!" + '<br><br><input class=button value=' + wdk.msg('Continue') + ' type=button onclick="window.location.reload(true)">';
		document.getElementById("result").innerHTML =
			'<center><b>' + message + '<' + '/b><' + '/center><br>';
		return;
	}
	setTimeout(upload_prompt, 500);
}

function upload_cmd() {
	wdk.getById("titleupwarng").innerHTML = wdk.msg("Processing! Please wait ");
	wdk.showResultBG();
	var file = wdk.getById('$smb_file').value;
	var path = wdk.getById('$smb_url').value;
	var user = wdk.getById('$smb_usr').value;
	var pass = wdk.getById('$smb_pass').value;
	var s = 'smbc upload ' + file + ' ' + path + ' ' + user + ' ' + pass;

	setTimeout(function() {
		wdk.cliCmd(s);
		setTimeout(function() {
			upload_prompt();
		}, 500);
	}, 1000)
}

function init() {
	var f = document.frm;

	f.reset();
	wdk.init_form();

	wdk.getById("ub").value = wdk.msg("Upload");
}

function apply() {
	wdk.getById("titleupwarng").innerHTML = wdk.msg("");
	wdk.save_form(5000);
}
 </SCRIPT>

 <link rel=stylesheet type=text/css href=demo2.css>
</HEAD>

<body class=gui onload=init() onkeydown="(event.keyCode==13) ? 0 : 1">
 <script>
header()
 </script>
 <form name=frm>
  <fieldset>
   <legend>
    Samba&nbsp;
    <script>
wdk.putmsg("Upload")
    </script>
   </legend>
   <div class=setting>
    <div class=label>Samba URL</div>
    <input name=$smb_url id=$smb_url size=30>
    <input id=ub class=button type=button onclick=upload_cmd()>
   </div>
   <div class=setting>
    <div class=label>
     Samba&nbsp;
     <script>
wdk.putmsg("User Name")
     </script>
    </div>
    <input name=$smb_usr id=$smb_usr>
   </div>
   <div class=setting>
    <div class=label>
     Samba&nbsp;
     <script>
wdk.putmsg("Password")
     </script>
    </div>
    <input name=$smb_pass id=$smb_pass>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("File")
     </script>
    </div>
    <input name=$smb_file id=$smb_file>
   </div>
  </fieldset>
  <script>
footer()
  </script>
 </form>

</html>
<!--endif-->
