<!DOCTYPE HTML>
<HTML>

<head>
 <title>Panther</title>
 <META http-equiv=Content-Type content='text/html; charset=utf-8'>
 <SCRIPT src=common.js></SCRIPT>
 <SCRIPT src=wdk.js></SCRIPT>
 <SCRIPT src=product.js></SCRIPT>
 <SCRIPT>
wdk.cdbLoad(['$sys_name', '$sys_domain', '$sys_day_info', '$sys_ntp_svr1-16',
	/*--ifdef CONFIG_NAT_OPTION--*/
	'$nat_enable',
	/*--endif--*/
	/*--ifdef CONFIG_BRIDGE_MODE--*/
	'$sys_funcmode', '$fw_enable', '$fw_clientf_mode', '$fw_urlf_mode',
	'$route_rip_en', '$upnp_enable', '$ddns_enable', 'wan_mode', '$dhcps_enable',
	/*--endif--*/
	/*--ifdef CONFIG_SNMP--*/
	'$snmp_enable', '$snmp_trap',
	/*--endif--*/
]);

/*--ifdef CONFIG_BRIDGE_MODE--*/
var dtimer = 15;
var timer;
/*--endif--*/

function init() {
	var f = document.frm,
		r;
	wdk.init_form();
	r = wdk.cdbVal('$sys_day_info');
	f.TZ.value = rule2var(r, 'tz');
	/*--ifdef CONFIG_BRIDGE_MODE--*/
	showHideFuncMode('hostconf_opmode', Number(wdk.cdbVal('$sys_funcmode')));
	/*--endif--*/
	/*--ifdef CONFIG_SNMP--*/
	r = wdk.cdbVal('$snmp_enable');
	f.snmp_en.checked = Number(rule2var(r, 'en'));
	f.port.value = rule2var(r, 'port');
	f.rcm.value = rule2var(r, 'rcm');
	f.rwcm.value = rule2var(r, 'wcm');
	r = wdk.cdbVal('$snmp_trap');
	f.trap_en.checked = Number(rule2var(r, 'en'));
	f.host_ip.value = rule2var(r, 'host');
	f.cm.value = rule2var(r, 'cm');
	showHide('hostconf_snmp', f.snmp_en.checked);
	/*--endif--*/
}

function apply() {
	var f = document.frm;
	var m, vlan_flag = 0;

	if (!chkStr(f.HN, "Host Name")) {
		highlight("$sys_name");
		return;
	}
	//if (!chkStr(f.DN,"Domain name")) return;
	if (f.ntp.value != '')
		if (!chkIpOrDomain(f.ntp, "NTP server")) {
			highlight("$sys_ntp_svr1");
			return;
		}

	m = 'tz=' + f.TZ.value;
	wdk.cdbSet("$sys_day_info", m);

	/*--ifdef CONFIG_SNMP--*/
	if (f.snmp_en.checked) {
		if (!chkStr(f.rcm, "Community Name(Read Only)")) {
			highlight("snmpCommunityNameR");
			return;
		}
		if (!chkStr(f.rwcm, "Community Name(Read Write)")) {
			highlight("snmpCommunityNameRW");
			return;
		}
		if (!chkNum(f.port, 1, 65535, "Port")) {
			highlight("snmpPort");
			return;
		}
		if (f.trap_en.checked) {
			if (!chkStr(f.cm, "Trap Name")) {
				highlight("snmpTrapName");
				return;
			}
			if (!chkIP(f.host_ip, "Trap IP")) {
				highlight("snmpTrapIp");
				return;
			}
		}
	}
	m = 'en=' + Number(f.snmp_en.checked) + '&port=' + f.port.value + '&rcm=' + f.rcm.value + '&wcm=' + f.rwcm.value;
	wdk.cdbSet("$snmp_enable", m);
	m = 'en=' + Number(f.trap_en.checked) + '&host=' + f.host_ip.value + '&cm=' + f.cm.value;
	wdk.cdbSet("$snmp_trap", m);
	/*--endif--*/

	/*--ifdef CONFIG_BRIDGE_MODE--*/
	var k = wdk.cdbVal('$sys_funcmode');
	if (f.funcmode.value != k) {
		if (vlan_flag)
			alert(wdk.msg("VLAN setting will disable."));
		if (f.funcmode.value == 1)
			alert(wdk.msg("DHCP server will ") + wdk.msg("Disable"));
		else
			alert(wdk.msg("DHCP server will ") + wdk.msg("Enable"));

		if (window.confirm(wdk.msg("Function mode has been changed. Device will reboot..."))) {
			wdk.cdbSet('$vlan_idx', 0);
			if (f.funcmode.value == 1)
				wdk.cdbSet('$dhcps_enable', 0);
			else
				wdk.cdbSet('$dhcps_enable', 1);
			wdk.showResultBG();
			reboot();
			wdk.save_form(0, 1);
		}
	} else
	/*--endif--*/
	{
		wdk.save_form(2000);
	}
}
 </SCRIPT>

 <link rel=stylesheet type=text/css href=demo2.css>
</HEAD>

<body class=gui onload=init() onkeydown="(event.keyCode==13) ? 0 : 1">
 <script>
header()
 </script>
 <form name=frm>
  <fieldset>
   <legend>
    <script>
wdk.putmsg("Time");
    </script>
   </legend>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("NTP Server");
wdk.putmsg(" (IP or Domain name)");
     </script>
    </div>
    <input type=text name=ntp id=$sys_ntp_svr1 size=40 maxlength=32>&nbsp;
    <script>
wdk.putmsg("(Optional)");
    </script>
   </div>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Time Zone");
     </script>
    </div>
    <select name=TZ size=1>
     <script>
genTimeOpt();
     </script>
    </select>
   </div>
  </fieldset>
  <br>
  <fieldset>
   <legend>
    <script>
wdk.putmsg("Name");
    </script>
   </legend>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("Host Name");
     </script>
    </div>
    <input name=HN id=$sys_name size=40 maxlength=32>
   </div>
   <!--<div class=setting>
		<div class=label><script>wdk.putmsg("Domain Name");</script></div>
		<input name=DN id=$sys_domain size=25 maxlength=60>
	</div>-->
  </fieldset>
  <!--ifdef CONFIG_SNMP-->
  <br>
  <fieldset>
   <legend>
    <script>
wdk.putmsg("SNMP");
    </script>
   </legend>
   <div class=setting>
    <div class=label>
     <script>
wdk.putmsg("SNMP Settings");
     </script>
    </div>
    <input type="checkbox" name=snmp_en size=1 onclick="showHide('hostconf_snmp',this.checked)">
    <script language="javascript">
wdk.putmsg("Enabled");
    </script>
   </div>
   <div id=hostconf_snmp>
    <div class=setting>
     <div class=label>
      <script>
wdk.putmsg("Community Name");
      </script>
     </div>
     <input id="snmpCommunityNameR" name=rcm size=25 maxlength=60>(Read Only)
    </div>
    <div class=setting>
     <div class=label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
     <input id="snmpCommunityNameRW" name=rwcm size=25 maxlength=60>(Read Write)
    </div>
    <div class=setting>
     <div class=label>
      <script>
wdk.putmsg("Port");
      </script>
     </div>
     <input id="snmpPort" name=port size=25 maxlength=60>
    </div>
    <div class=setting>
     <div class=label>
      <script>
wdk.putmsg("Trap Settings");
      </script>
     </div>
     <input type="checkbox" name=trap_en size=1>
     <script language="javascript">
wdk.putmsg("Enabled");
     </script>
    </div>
    <div class=setting>
     <div class=label>
      <script>
wdk.putmsg("Trap Name");
      </script>
     </div>
     <input id="snmpTrapName" name=cm size=25 maxlength=60>
    </div>
    <div class=setting>
     <div class=label>
      <script>
wdk.putmsg("Trap IP");
      </script>
     </div>
     <input id="snmpTrapIp" name=host_ip size=25 maxlength=60>
    </div>
   </div>
  </fieldset>
  <!--endif-->
  <!--ifdef CONFIG_BRIDGE_MODE-->
  <div id=hostconf_opmode>
   <!--endif-->
   <!--ifdef CONFIG_NAT_OPTION-->
   <br>
   <fieldset>
    <legend>
     <script>
wdk.putmsg("Operating Mode");
     </script>
    </legend>
    <div class=setting>
     <div class=label>
      <script>
puts("NAPT ");
      </script>
     </div>
     <input type="checkbox" name=NAT id=$nat_enable size=1>
     <script language="javascript">
wdk.putmsg("Enabled");
     </script>
     <!--<select name=NAT id=$nat_enable size=1>
			<option value=0><script>wdk.putmsg("Router");</script> </option>
			<option value=1><script>puts("NAPT ");</script> </option>
			<option value=1><script>puts("NAT "+wdk.msg("Gateway"));</script> </option>
		</select>-->
    </div>
   </fieldset>
   <!--endif-->
   <!--ifdef CONFIG_BRIDGE_MODE-->
  </div>

  <br>
  <fieldset>
   <legend>
    <script>
wdk.putmsg("Function Mode");
    </script>
   </legend>
   <div class=setting>
    <div class=label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
    <select name=funcmode id=$sys_funcmode size=1 onchange="showHideFuncMode('hostconf_opmode',Number(this.value))">
     <option value=0>
      <script>
wdk.putmsg("Router");
      </script>
     </option>
     <option value=1>
      <script>
wdk.putmsg("Bridge");
      </script>
     </option>
    </select>
   </div>
  </fieldset>
  <!--endif-->

  <script>
footer()
  </script>
 </form>

</html>
